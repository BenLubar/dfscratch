interaction_vampire_halfling

$Id$

[OBJECT:INTERACTION]

[INTERACTION:VAMPIRISM_FREQUENCY_REDUCER_HLG]

##needed to set a vampirism % < 1 ##

[I_TARGET:A:CREATURE]
	[IT_LOCATION:CONTEXT_CREATURE]
	[IT_REQUIRES:CAN_LEARN]
	[IT_CANNOT_HAVE_SYNDROME_CLASS:VAMPIRISM_SET]

[I_EFFECT:ADD_SYNDROME]
	[IE_TARGET:A]
	[IE_IMMEDIATE]

	[SYNDROME]
	[SYN_AFFECTED_CLASS:ALL]
	[CE_CAN_DO_INTERACTION:PROB:10:START:0:END:9001]
	[CDI:INTERACTION:VAMPIRISM_SWITCH_HLG]
	[CDI:ADV_NAME:Pursue vampirism further]
	[CDI:TARGET:A:SELF_ONLY]
	[CDI:FREE_ACTION]
	[CDI:MAX_TARGET_NUMBER:A:1]
	[CDI:WAIT_PERIOD:90001]

	[SYNDROME]
	[SYN_AFFECTED_CLASS:ALL]
	[SYN_NAME:vampirism present for creature]
	[SYN_CLASS:VAMPIRISM_SET]
	[CE_BODY_APPEARANCE_MODIFIER:APPEARANCE_MODIFIER:BROADNESS:99:START:0]

[INTERACTION:VAMPIRISM_SWITCH_HLG]

[I_TARGET:A:CREATURE]
	[IT_LOCATION:CONTEXT_CREATURE]
	[IT_REQUIRES:CAN_LEARN]
	[IT_CANNOT_HAVE_SYNDROME_CLASS:VAMPIRISM_DETERMINED]

[I_EFFECT:ADD_SYNDROME]
	[IE_TARGET:A]
	[IE_IMMEDIATE]
	[SYNDROME]
	[SYN_AFFECTED_CLASS:ALL]
	[SYN_NAME:vampirism determined]
	[SYN_CLASS:VAMPIRISM_DETERMINED]
	[CE_CAN_DO_INTERACTION:PROB:1:START:0:END:9001] 
	[CDI:INTERACTION:VAMPIRISM_HLG]
	[CDI:ADV_NAME:Become a vampire]
	[CDI:TARGET:A:SELF_ONLY]
	[CDI:FREE_ACTION]
	[CDI:MAX_TARGET_NUMBER:A:1]
	[CDI:WAIT_PERIOD:90001]

[INTERACTION:VAMPIRISM_HLG]
	[I_SOURCE:DEITY]
	[IS_USAGE_HINT:MAJOR_CURSE]
	[IS_HIST_STRING_1: cursed ]
	[IS_HIST_STRING_2: with a dark desire to feast on the blood and souls of their loved ones!]
	
	[I_TARGET:A:CREATURE]
	[IT_LOCATION:CONTEXT_CREATURE]
	[IT_REQUIRES:CAN_LEARN]
  	[IT_CANNOT_HAVE_SYNDROME_CLASS:VAMPIRISM]

	[I_EFFECT:ADD_SYNDROME]
	[IE_TARGET:A]
	[IE_IMMEDIATE]
	[IE_ARENA_NAME:Vampire HLG]
	[SYNDROME]
	[SYN_NAME:is a vampire!]
	[SYN_CLASS:VAMPIRISM]
	[SYN_AFFECTED_CLASS:ALL]

	## vanilla vampirism except vampires DO eat and drink so as to avoid the alcohol dependence stupidity,
	do gain and rust in physical attributes and are attacked by undead ##	

	[CE_ADD_TAG:BLOODSUCKER:NO_AGING:NOEXERT:NOPAIN:NOBREATHE:NOSTUN:NONAUSEA:NO_DIZZINESS:NO_FEVERS:PARALYZEIMMUNE:NO_SLEEP:START:0]
	[CE_PHYS_ATT_CHANGE:STRENGTH:200:0:AGILITY:200:0:TOUGHNESS:200:0:START:0]

	## after one year, vampires can and will turn another suitable creature into a vampire 
	2x/year ##

	[CE_CAN_DO_INTERACTION:START:403200]
	  [CDI:INTERACTION:VAMPIRISM_HLG]
	  [CDI:TARGET:A:TOUCHABLE]
	  [CDI:FREE_ACTION]
	  [CDI:MAX_TARGET_NUMBER:A:1]
	  [CDI:WAIT_PERIOD:201600]
	  [CDI:ADV_NAME:Spread vampirism]

	## when threatened, vampires can turn into bats for a few seconds 1x/day ##

	[CE_CAN_DO_INTERACTION:START:0]
	  [CDI:INTERACTION:VAMPIRE_FLIGHT_HLG]
	  [CDI:TARGET:A:SELF_ONLY]
	  [CDI:USAGE_HINT:FLEEING]
	  [CDI:FREE_ACTION]
	  [CDI:MAX_TARGET_NUMBER:A:1]
	  [CDI:WAIT_PERIOD:1200]
	  [CDI:ADV_NAME:Transform into a bat and escape!]

	[CE_CAN_DO_INTERACTION:START:403200]
	  [CDI:INTERACTION:VAMPIRE_SLASHER_HLG]
	  [CDI:TARGET:A:TOUCHABLE]
	  [CDI:USAGE_HINT:GREETING]
	  [CDI:FREE_ACTION]
	  [CDI:MAX_TARGET_NUMBER:A:1]
	  [CDI:WAIT_PERIOD:120000]
	  [CDI:ADV_NAME:Slash a friend! You know you want to!]
	  [CDI:VERB:slash the target with your fingernails:is lashing out with their sharp claws:n/a]
	  [CDI:TARGET_VERB:are bleeding all over!:is bleeding all over!]

	[CE_CAN_DO_INTERACTION:START:0]
	  [CDI:INTERACTION:VAMPIRE_SLASHER_HLG]
	  [CDI:TARGET:A:TOUCHABLE]
	  [CDI:USAGE_HINT:ATTACK]
	  [CDI:FREE_ACTION]
	  [CDI:MAX_TARGET_NUMBER:A:1]
	  [CDI:WAIT_PERIOD:1200]
	  [CDI:ADV_NAME:Slash an enemy!]
	  [CDI:VERB:slash the target with your fingernails:is slashing the enemy with their sharp claws:n/a]
	  [CDI:TARGET_VERB:are bleeding all over!:is bleeding profusely!]

##STL: Formatted to line up neatly with above. Everything must be perfect.../crazy giggle##
	[CE_CAN_DO_INTERACTION:START:0]
	  [CDI:INTERACTION:STOP_THIRST_HUNGER_HLG]
	  [CDI:ADV_NAME:Embrace undeath (no longer thirst or hunger)]
	  [CDI:TARGET:A:SELF_ONLY]
          [CDI:USAGE_HINT:ATTACK] ## AI never uses
	  [CDI:TARGET_VERB:no longer feel mortal cravings:is momentarily wrapped in darkness]

[INTERACTION:VAMPIRE_SLASHER_HLG]

[I_TARGET:A:CREATURE]
	[IT_LOCATION:CONTEXT_CREATURE]
	[IT_MANUAL_INPUT:target]
  	[IT_CANNOT_HAVE_SYNDROME_CLASS:VAMPIRISM]

[I_EFFECT:ADD_SYNDROME]
	[IE_TARGET:A]
	[IE_IMMEDIATE]
	[SYNDROME]
	[SYN_NAME:has had their major arteries slashed open!]
	[CE_BLEEDING:SEV:100:PROB:100:BP:BY_CATEGORY:ALL:MUSCLE:SIZE_DILUTES:START:10:PEAK:1200:END:8400]
## severe enough to kill small creatures like halflings ##

[INTERACTION:VAMPIRE_FLIGHT_HLG]

[I_TARGET:A:CREATURE]
	[IT_LOCATION:CONTEXT_CREATURE]

[I_EFFECT:ADD_SYNDROME]
	[IE_TARGET:A]
	[IE_IMMEDIATE]
	[SYNDROME]
	[SYN_NAME:has taken the form of a bat!]

	[CE_BODY_TRANSFORMATION:START:0:END:300]
		[CE:CREATURE:VAMPIRE_BAT_HLG:FEMALE]

	[CE_CAN_DO_INTERACTION:START:0:END:300]
		[CDI:INTERACTION:MATERIAL_EMISSION]
 		[CDI:ADV_NAME:Vampiric cloud]
 		[CDI:MATERIAL:INORGANIC:DARK_BLOOD_HLG:UNDIRECTED_GAS]
 		[CDI:WAIT_PERIOD:1200]
 		[CDI:USAGE_HINT:ATTACK]
 		[CDI:TARGET:C:LINE_OF_SIGHT]
		[CDI:VERB:are surrounded by a cloud of darkness:is surrounded by a cloud of darkness:n/a]

## Before you become a vampire, you can "opt out" of both "scratch" vampirism and anything working similarly to vanilla vampirism,
## werecreaturism, and curses. Gives you a title for bragging rights. Available by adding the relevant variation to creature

[INTERACTION:SUPERNATURAL_OPTOUT_HLG]

[I_TARGET:A:CREATURE]
	[IT_LOCATION:CONTEXT_CREATURE]
	[IT_FORBIDDEN:SUPERNATURAL]
	[IT_FORBIDDEN:NO_AGING]
	[IT_CANNOT_HAVE_SYNDROME_CLASS:VAMPIRISM]

		[IT_CANNOT_HAVE_SYNDROME_CLASS:WERECURSE] # legacy -- vanilla types, in case someone decides to re-enable those
		[IT_CANNOT_HAVE_SYNDROME_CLASS:VAMPCURSE]
		[IT_CANNOT_HAVE_SYNDROME_CLASS:DISTURBANCE_CURSE]

[I_EFFECT:ADD_SYNDROME]
	[IE_TARGET:A]
	[IE_IMMEDIATE]
	[SYNDROME]
	[SYN_NAME:spiritual purity]
	[SYN_AFFECTED_CLASS:ALL] # needed to avoid explosion - for use with vanilla creatures must be changed to "GENERAL_POISON"
	[CE_CAN_DO_INTERACTION:START:0]
		[CDI:INTERACTION:PURIFY_SUPERNATURAL_HLG]
 		[CDI:ADV_NAME:Purify target (permanently immune to vampirism and curses)]
 		[CDI:TARGET:A:LINE_OF_SIGHT]
		[CDI:TARGET_VERB:feel pure:is momentarily wrapped in shimmering light]


[INTERACTION:PURIFY_SUPERNATURAL_HLG]

[I_TARGET:A:CREATURE]
	[IT_LOCATION:CONTEXT_CREATURE]
	[IT_FORBIDDEN:SUPERNATURAL]
	[IT_FORBIDDEN:NO_AGING]
	[IT_CANNOT_HAVE_SYNDROME_CLASS:VAMPIRISM]

		[IT_CANNOT_HAVE_SYNDROME_CLASS:WERECURSE] # legacy -- vanilla types, in case someone decides to re-enable those
		[IT_CANNOT_HAVE_SYNDROME_CLASS:VAMPCURSE]
		[IT_CANNOT_HAVE_SYNDROME_CLASS:DISTURBANCE_CURSE]

	[IT_MANUAL_INPUT:target]

[I_EFFECT:ADD_SYNDROME]
	[IE_TARGET:A]
	[IE_IMMEDIATE]
	[IE_ARENA_NAME:Purist HLG]
	[SYNDROME]
	[SYN_NAME:spiritually purified]
	[SYN_AFFECTED_CLASS:ALL] #needed to avoid explosion
	[SYN_CLASS:VAMPIRISM] # does not imply this is a form of vampirism, instead makes it mutually incompatible with vampirism
	[SYN_CLASS:WERECURSE] # as above, legacy
	[SYN_CLASS:VAMPCURSE]
	[SYN_CLASS:DISTURBANCE_CURSE]
	[CE_ADD_TAG:SUPERNATURAL:NO_AGING:START:0]
	[CE_DISPLAY_NAME:NAME:paladin:paladins:purist:START:0]

[INTERACTION:STOP_THIRST_HUNGER_HLG]

[I_TARGET:A:CREATURE]
   [IT_LOCATION:CONTEXT_CREATURE]

[I_EFFECT:ADD_SYNDROME]
   [IE_TARGET:A]
   [IE_IMMEDIATE]
   [SYNDROME]
   [SYN_NAME:fully vampire]
   [SYN_AFFECTED_CLASS:ALL]
        [CE_REMOVE_TAG:NO_DRINK:NO_EAT:START:0]